sudo: false
cache: bundler
language: ruby
services:
- memcache
- redis-server
script:
- bundle exec rake spec
- bundle exec rake karma:run
- bundle exec rubocop -R
before_script:
- PHANTOMJS_CDNURL=https://bitbucket.org/ariya/phantomjs/downloads npm install
- psql -c 'create database mpdx_test;' -U postgres
- bundle exec rake db:schema:load RAILS_ENV=test
branches:
  only:
  - master
env:
  - REDIS_PORT_6379_TCP_ADDR=localhost REDIS_PORT_6379_TCP_PORT=6379 DB_ENV_POSTGRESQL_DB=mpdx_test DB_ENV_POSTGRESQL_USER=postgres
