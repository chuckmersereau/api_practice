<img class="avatar small" ng-src="{{$ctrl.contact.square_avatar}}">
<div class="contact-details">
  <div class="col-sm-7 main-details">
    <h4 class="name"><a href="/contacts/{{$ctrl.contact.id}}">{{$ctrl.contact.name}}</a>
      <i class="fa fa-envelope" ng-class="{'icon-error-red': $ctrl.hasSendNewsletterError()}"
         title="{{$ctrl.contact.send_newsletter | gettext}}" ng-show="$ctrl.contact.send_newsletter"></i>

              <span title="<%= _('Partner - Special')   %>" ng-show="$ctrl.contact.status === 'Partner - Special'">
                <span>{{$ctrl.contact.pledge_currency_symbol}}</span>
              </span>
              <span title="<%= _('Partner - Financial') %>" ng-show="$ctrl.contact.status === 'Partner - Financial'">
                <span>{{$ctrl.contact.pledge_currency_symbol}}</span>
                <span>{{$ctrl.contact.pledge_currency_symbol}}</span>
              </span>
    </h4>
    <div class="people">
      <div ng-repeat="i in $ctrl.contact.person_ids" ng-show="!$ctrl.getPerson(i).deceased" class="people-single-contact">
        <a href="/people/{{i}}">{{$ctrl.getPerson(i).name}}</a>
                <span ng-if="$ctrl.getPrimaryPhone($ctrl.getPerson(i).id) && !$ctrl.getPrimaryPhone($ctrl.getPerson(i).id).historic"
                      class="phone-type phone-type-{{$ctrl.getPrimaryPhone($ctrl.getPerson(i).id).location}}">
                  {{$ctrl.getPrimaryPhone($ctrl.getPerson(i).id).number}}
                </span>
        <a ng-href="mailto:{{$ctrl.getEmailAddress(e).email}}" ng-repeat="e in $ctrl.getPerson(i).email_address_ids"
           ng-if="!$ctrl.getEmailAddress(e).historic">
          <i class="fa fa-envelope-square" title="<%= _('Email') %>"></i>
        </a>
        <a ng-href="https://www.facebook.com/{{$ctrl.getFacebookId(fb).remote_id}}" target="_blank"
           ng-repeat="fb in $ctrl.getPerson(i).facebook_account_ids">
          <i class="fa fa-facebook-square" title="<%= _('Facebook profile') %>"></i>
        </a>
      </div>
    </div>
    <address class="address" ng-repeat="i in $ctrl.contact.address_ids" ng-bind-html="$ctrl.getAddress(i)"></address>
    <div class="tags">
      <a class="tag" ng-repeat-start="tag in $ctrl.contact.tag_list">{{tag}}</a><span style="display:inline;" ng-repeat-end> </span>
    </div>
  </div>
  <div class="col-sm-5 more-details">
    <div ng-show="$ctrl.contact.status !== ''">{{$ctrl.contact.status | gettext}}</div>
    <div ng-show="$ctrl.contact.pledge_amount > 0">
      {{$ctrl.contact.pledge_amount | currency: $ctrl.contact.pledge_currency_symbol}} {{$ctrl.contact.pledge_frequency | pledgeFrequencyStr}}
      <div ng-if="$ctrl.contact.status == 'Partner - Financial'" ng-switch="$ctrl.contact.pledge_received">
        <div ng-switch-when="true" class="text-success" ><%= _('Commitment Received') %></div>
        <div ng-switch-when="false" class="text-warning"><%= _('Commitment Not Received') %></div>
      </div>
    </div>
    <a href="/tasks?contact_ids={{$ctrl.contact.id}}" ng-show="$ctrl.contact.uncompleted_tasks_count > 0">
      <%= _('Tasks') %>: {{$ctrl.contact.uncompleted_tasks_count}}
    </a>
  </div>
</div>
<div class="btn-group">
  <a class="btn btn-sm btn-default"
     href="/contacts/{{$ctrl.contact.id}}/edit"
     data-toggle="tooltip"
     data-placement="top"
     title="<%= _('Edit Contact') %>"><i class="fa fa-pencil"></i></a>
  <a class="btn btn-sm btn-default"
     data-behavior="hide_contact"
     data-method="delete"
     data-remote="true"
     href="/contacts/{{$ctrl.contact.id}}"
     rel="nofollow"
     data-toggle="tooltip"
     data-placement="top"
     title="<%= _('Hide Contact') %>"><i class="fa fa-eye-slash"></i></a>
  <button class="btn btn-sm btn-default" ng-click="$parent.$ctrl.selectContacts($ctrl.contact.id)">
    <input type="checkbox" ng-checked="$parent.$ctrl.contactsSelected($ctrl.contact.id)" />
  </button>
</div>
