<% @contact = exhibit(@contact, self) if @contact %>
<% account_list_exhibit = exhibit(current_account_list) %>
<% unless params[:page] %>
  <% if @start_date %>
    <div class="row page-controls">
      <div class="col-md-8 col-sm-8">
        <%= link_to(donations_path(start_date: @start_date - 1.month)) do %>
          <i class="fa fa-chevron-left"></i>
          <%= _('Previous Month') %>
        <% end %>
        <% unless @end_date >= Date.today %>
          &nbsp; &nbsp;
          <%= link_to(donations_path(start_date: @start_date + 1.month)) do %>
            <%= _('Next Month') %>
            <i class="fa fa-chevron-right"></i>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="clr"></div>
    <h2><%= _('Donations for %{start_date} through %{end_date}').localize % {start_date: l(@start_date), end_date: l(@end_date)} %></h2>
  <% end %>
<div class="table-responsive">
  <table class="tablelist donations" id="donations_table">
    <thead>
      <tr>
        <% if @contact %>
          <th><%= _('Donor') %></th>
        <% end %>
        <th class="date"><%= _('Date') %></th>
        <% unless @contact %>
          <th><%= _('Donor') %></th>
        <% end %>
        <th class="right"><%= _('Amount') %></th>
        <% if account_list_exhibit.multi_currencies_for_same_symbol? %>
          <th></th>
        <% end %>
        <% if current_account_list.multiple_designations %>
          <th><%= _('Designation') %></th>
        <% end %>
        <th><%= _('Method') %></th>
        <th><%= _('Motivation') %></th>
        <%#<th class="appeal">Appeal</th>%>
        <th></th>
      </tr>
    </thead>
    <tbody>
  <% end %>

  <%= render donations, account_list_exhibit: account_list_exhibit %>

  <% unless params[:page] %>
    </tbody>
    <% unless @contact %>
      <tfoot>
        <% totals_by_currency(donations).each do |d| %>
          <tr class="sum">
            <td></td>
            <td class="right"><strong><%= _('Total %{currency} Donations (%{count}):').localize % {currency: d[:currency], count: d[:count]} %></strong></td>
            <td class="right"><%= d[:sum].localize.to_currency.to_s(currency: d[:currency], precision: 0) %></td>
            <td colspan="4"></td>
          </tr>
        <% end %>
      </tfoot>
    <% end %>
  </table>
</div><!-- responsive-table -->
<% end %>

<div id="js-edit_donation" style="display:none" title="<%= _('Edit Donation') %>">
  <%= spinner(extra: 'edit-donation') %>
  <div class="form_wrapper"></div>
</div>

