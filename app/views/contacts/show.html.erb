<div class="row">
  <script>
    $('base').remove() //TODO: This hack exists to fix a bug coming from jQuery UI, delete once contact show page is angularized
  </script>
  <%= render 'contact_body', contacts: @filtered_contacts, contact: @contact %>

  <div id="contact_drawer" class="col-md-3">
    <div class="contact_drawer_inner">
      <div class="filters">
        <% if current_user.contacts_filter[current_account_list.id.to_s].present? %>
          <span class="filtered_message">
            <%= _('Contacts List Filtered') %>
            <%= link_to(_('Reset Filters'), contact_path(@contact, clear_filter: true), class: 'btn btn-xs btn-default')  %>
          </span>
        <% end %>
        <%= text_field_tag :contact_name, '', autocomplete: 'off', placeholder: _('Search by Name'), class: "search_filter form-control" %>
      </div>
      <ul class="contact_list">
        <% @filtered_contacts.each do |contact| %>
          <li data-hook="contact"><%= link_to(truncate(contact.to_s, :length => 30), contact, data: {name: contact.to_s, id: contact.id}, class: contact.id == @contact.id ? 'active' : '', remote: false) %></li>
        <% end %>
      </ul>
    </div>
  </div>

  <%= render 'tasks/results_modal' %>
  <task-followup-dialog id="task-followup-dialog"></task-followup-dialog>
</div>
