$ ->
  if $('.home_controller')[0]?
    $(document).on 'tabsshow', '#dash-tabs', (event, ui)->
      $.mpdx.loadDashTabData(ui.tab.hash)

    $.mpdx.loadDashTabData(window.location.hash)

$.mpdx.loadDashTabData = (hash) ->
  hash ||= '#dash-connect'
  $.mpdx.loadDashbaordTab(hash)

$.mpdx.loadDashbaordTab = (hash)->
  tab = hash.split('-')[1]
  if $(hash).html() == ''
    $(hash).html('<%= image_tag('spinner.gif') %>')
    $.ajax {
      url: '/home/' + tab,
      dataType: 'script'
    }

