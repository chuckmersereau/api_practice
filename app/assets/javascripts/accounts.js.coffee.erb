$ ->
  if $('#accounts_index')[0]? || $('#csv_import_preview')[0]?

    $(document).on 'click', '[data-behavior="show_import"]', ->
      $(this).hide()
      div = $(this).closest('[data-behavior="account"]')
      $('[data-behavior="import_options"]', div).show()
      false

    $(document).on 'click', '[data-behavior="run_previewed_import"]', ->
      $('#import_in_preview').val(false)
      $('form.edit_import').submit()
      false

    $(document).on 'click', '[data-behavior="show_org_import"]', ->
      $(this).closest('div').hide()
      div = $(this).closest('[data-behavior="account"]')
      $('[data-behavior="org_import_options"]', div).show()
      false

    $(document).on 'click', '[data-behavior="import_button"]', ->
      $(this).closest('form').submit()
      false

    $(document).on 'click', '[data-behavior="add_org_account"]', ->
      $('#new_org_account').dialog
        resizable: false,
        modal:'true',
        maxHeight: 600
      false
    $(document).on 'click', '[data-behavior="edit_organization_account"]', (event) ->
      $.ajax {
        url: event.target.href,
        dataType: 'script'
      }
      $('#org_connection_box').dialog
        title: '<%= _('Loading') %>',
        content: '',
        modal:'true',
        maxHeight: 600
      false
    $(document).on 'click', '#connect_to_org', ->
      $('[data-behavior="new_org_account"]').dialog('destroy')
      false

    if location.hash.indexOf('account') != -1 && $('a.edit', location.hash)
      $('a', location.hash).click()

